import{c as s,e as o,f as e,F as h,x as b,G as x,g as p,i as f,u as n,L as z,d as M,t as a,B as I,j as L,n as N,b as $,q as w,o as B,_ as C,l as O,O as V,X as F,m as T,v as Y,y as j,z as q,M as A}from"./app.642b8a33.js";import{u as E}from"./useNotyf.bea9e4e4.js";import{_ as H}from"./Input.282b5ae5.js";import{h as G}from"./helper.cdd34f31.js";import{b as P,w as U}from"./vue-dataset.es.b0b17075.js";import"./moment.62d3fb0a.js";const X={"aria-label":"..."},Z={class:"pagination"},J=["innerHTML"],K={__name:"Pagination",props:{current_page:{type:Number,default:1},first_page_url:"",from:{type:Number,default:1},last_page:{type:Number,default:1},last_page_url:"",links:{type:Array,default:()=>[]},next_page_url:null,path:"",per_page:{type:Number,default:10},prev_page_url:null,to:{type:Number,default:2},total:{type:Number,default:10}},setup(t){return(r,m)=>(s(),o("div",null,[e("nav",X,[e("ul",Z,[(s(!0),o(h,null,b(t.links,i=>(s(),o("li",{class:x(["page-item",{disabled:!i.url,active:i.active}])},[p(n(z),{href:i.url,class:"page-link"},{default:f(()=>[e("span",{innerHTML:i.label},null,8,J)]),_:2},1032,["href"])],2))),256))])])]))}},Q=["data-bs-target"],R=e("i",{class:"fa fa-fw fa-download me-1"},null,-1),W=M({__name:"ImportButton",props:{modalId:String},setup(t){return(r,m)=>(s(),o("button",{type:"button",class:"btn btn-alt-primary push","data-bs-toggle":"modal","data-bs-target":`#${t.modalId}`},[R,e("span",null,a(r.$t("Import_shapefile")),1)],8,Q))}}),ee=["type"],te=M({__name:"SubmitButton",props:{type:{default:"submit"}},setup(t){return(r,m)=>(s(),o("button",{type:t.type,class:"btn btn-alt-primary border border-light rounded"},[I(r.$slots,"default",{},()=>[L(a(r.$t("Save")),1)])],8,ee))}});const k=t=>(j("data-v-02b0265b"),t=t(),q(),t),ae={class:"content"},se={class:"d-flex justify-content-end"},le={key:0,class:"text-center"},oe={class:"row"},ne={class:"col-md-12"},ie={class:"table-responsive"},de={class:"table table-striped mb-0"},re=k(()=>e("th",{scope:"col"},"#",-1)),ce={scope:"row"},pe={class:"d-flex flex-md-row flex-column align-items-center mt-3"},_e={class:"modal fade",id:"importStaticDataModal",tabindex:"-1","aria-labelledby":"importStaticDataModalLabel","aria-hidden":"true"},ue={class:"modal-dialog"},me={class:"modal-content"},fe={class:"modal-header"},he={class:"modal-title",id:"importStaticDataModalLabel"},be=k(()=>e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),ge={class:"modal-body"},ve=["onSubmit"],ye={class:"row"},Se={class:"col-12 mb-4"},$e={selected:"",disabled:"",value:null},xe=["value"],Me={class:"col-12 mb-4"},ke=["value"],De={class:"invalid-feedback animated fadeIn"},ze={class:"col-auto ms-auto"},Ie={__name:"Statics",props:{logs:{type:Object,default:()=>({current_page:1,data:[],first_page_url:"",from:1,last_page:1,last_page_url:"",links:[],next_page_url:null,path:"",per_page:10,prev_page_url:null,to:2,total:10})}},setup(t){const r=E(),m=$([{name:"Data type",field:"type"},{name:"Comment",field:"comment"},{name:"Date",field:"created_at"}]),i=$({options:[{label:"Zones",value:"zones.import.shape_file"},{label:"Balls",value:"balls.import.shape_file"},{label:"Borders",value:"borders.import.shape_file"}],selectedOption:"balls.import.shape_file"}),c=w({zip:null});B(()=>{document.querySelectorAll("#datasetLength label").forEach(_=>{_.remove()});let l=document.querySelector("#datasetLength select");l&&(l.classList="",l.classList.add("form-select"))});async function D(){c.post(route(i.selectedOption),{onSuccess:()=>{r.success("Data successfully imported!");const l=A.getInstance("#importStaticDataModal");l==null||l.hide()}})}return(l,_)=>{var g,v,y;return s(),o("div",ae,[e("div",se,[p(W,{"modal-id":"importStaticDataModal"})]),p(C,{title:l.$t("Imported_shape_files_logs"),"content-full":""},{default:f(()=>{var d;return[((d=t.logs.data)==null?void 0:d.length)==0?(s(),o("div",le,a(l.$t("No_data")),1)):(s(),Y(n(U),{key:1,"ds-data":t.logs.data},{default:f(({ds:Le})=>[e("div",oe,[e("div",ne,[e("div",ie,[e("table",de,[e("thead",null,[e("tr",null,[re,(s(!0),o(h,null,b(m,(u,S)=>(s(),o("th",{key:u.field},a(u.name),1))),128))])]),p(n(P),{tag:"tbody",class:"fs-sm"},{default:f(({row:u,rowIndex:S})=>[e("tr",null,[e("th",ce,a(S+1),1),e("td",null,a(u.type),1),e("td",null,a(u.comment),1),e("td",null,a(n(G).formatDate(u.created_at,"DD-MM-YYYY")),1)])]),_:1})])])])]),e("div",pe,[p(K,{links:t.logs.links},null,8,["links"])])]),_:1},8,["ds-data"]))]}),_:1},8,["title"]),e("div",_e,[e("div",ue,[e("div",me,[e("div",fe,[e("h5",he,a(l.$t("Import_zipped_shapefile_data")),1),be]),e("div",ge,[e("form",{onSubmit:O(D,["prevent"])},[e("div",ye,[e("div",Se,[V(e("select",{class:"form-select","aria-label":"Select layer type","onUpdate:modelValue":_[0]||(_[0]=d=>i.selectedOption=d)},[e("option",$e,a(l.$t("Select_layer_type")),1),(s(!0),o(h,null,b(i.options,d=>(s(),o("option",{value:d.value},a(d.label),9,xe))),256))],512),[[F,i.selectedOption]])]),e("div",Me,[p(H,{type:"file",accept:"zip,application/octet-stream,application/zip,application/x-zip,application/x-zip-compressed",onChange:_[1]||(_[1]=d=>n(c).zip=d.target.files[0]),class:x({"is-invalid":(v=(g=n(c).errors)==null?void 0:g.zip)==null?void 0:v.length}),placeholder:"Select a shapefile"},null,8,["class"]),n(c).progress?(s(),o("progress",{key:0,value:n(c).progress.percentage,max:"100"},a(n(c).progress.percentage)+"% ",9,ke)):T("",!0),e("div",De,a((y=n(c).errors)==null?void 0:y.zip),1)]),e("div",ze,[p(te)])])],40,ve)])])])])])}}},Fe=N(Ie,[["__scopeId","data-v-02b0265b"]]);export{Fe as default};
