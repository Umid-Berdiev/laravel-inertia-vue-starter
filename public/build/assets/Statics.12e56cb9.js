import{c as l,e as o,f as e,F as h,x as b,G as x,g as p,i as f,u as n,L as D,d as M,t as s,B as I,j as L,n as N,b as $,q as w,o as B,_ as C,l as O,O as V,W as F,m as T,v as Y,y as j,z as q,M as E}from"./app.dfbb29b1.js";import{u as A}from"./useNotyf.e4c647d9.js";import{_ as H}from"./Input.e72bff60.js";import{h as G}from"./helper.5068cdf4.js";import{b as P,w as U}from"./vue-dataset.es.bcf491c7.js";import"./moment.62d3fb0a.js";const W={"aria-label":"..."},Z={class:"pagination"},J=["innerHTML"],K={__name:"Pagination",props:{current_page:{type:Number,default:1},first_page_url:"",from:{type:Number,default:1},last_page:{type:Number,default:1},last_page_url:"",links:{type:Array,default:()=>[]},next_page_url:null,path:"",per_page:{type:Number,default:10},prev_page_url:null,to:{type:Number,default:2},total:{type:Number,default:10}},setup(a){return(d,m)=>(l(),o("div",null,[e("nav",W,[e("ul",Z,[(l(!0),o(h,null,b(a.links,i=>(l(),o("li",{class:x(["page-item",{disabled:!i.url,active:i.active}])},[p(n(D),{href:i.url,class:"page-link"},{default:f(()=>[e("span",{innerHTML:i.label},null,8,J)]),_:2},1032,["href"])],2))),256))])])]))}},Q=["data-bs-target"],R=e("i",{class:"fa fa-fw fa-download me-1"},null,-1),X=M({__name:"ImportButton",props:{modalId:String},setup(a){return(d,m)=>(l(),o("button",{type:"button",class:"btn btn-alt-primary push","data-bs-toggle":"modal","data-bs-target":`#${a.modalId}`},[R,e("span",null,s(d.$t("Import_shapefile")),1)],8,Q))}}),ee=["type"],te=M({__name:"SubmitButton",props:{type:{default:"submit"}},setup(a){return(d,m)=>(l(),o("button",{type:a.type,class:"btn btn-alt-primary border border-light rounded"},[I(d.$slots,"default",{},()=>[L(s(d.$t("Save")),1)])],8,ee))}});const k=a=>(j("data-v-57c31781"),a=a(),q(),a),ae={class:"content"},se={class:"d-flex justify-content-end"},le={key:0,class:"text-center"},oe={class:"row"},ne={class:"col-md-12"},ie={class:"table-responsive"},re={class:"table table-striped mb-0"},de=k(()=>e("th",{scope:"col"},"#",-1)),ce={scope:"row"},pe={class:"d-flex flex-md-row flex-column align-items-center mt-3"},_e={class:"modal fade",id:"importStaticDataModal",tabindex:"-1","aria-labelledby":"importStaticDataModalLabel","aria-hidden":"true"},ue={class:"modal-dialog"},me={class:"modal-content"},fe={class:"modal-header"},he={class:"modal-title",id:"importStaticDataModalLabel"},be=k(()=>e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),ge={class:"modal-body"},ve=["onSubmit"],ye={class:"row"},Se={class:"col-12 mb-4"},$e={selected:"",disabled:"",value:null},xe=["value"],Me={class:"col-12 mb-4"},ke=["value"],ze={class:"invalid-feedback animated fadeIn"},De={class:"col-auto ms-auto"},Ie={__name:"Statics",props:{logs:{type:Object,default:()=>({current_page:1,data:[],first_page_url:"",from:1,last_page:1,last_page_url:"",links:[],next_page_url:null,path:"",per_page:10,prev_page_url:null,to:2,total:10})}},setup(a){const d=A(),m=$([{name:"Data type",field:"type"},{name:"Comment",field:"comment"},{name:"Date",field:"created_at"}]),i=$({options:[{label:"Zones",value:"zones.import.shape_file"},{label:"Balls",value:"balls.import.shape_file"},{label:"Borders",value:"borders.import.shape_file"}],selectedOption:"balls.import.shape_file"}),c=w({zip:null});B(()=>{document.querySelectorAll("#datasetLength label").forEach(_=>{_.remove()});let t=document.querySelector("#datasetLength select");t&&(t.classList="",t.classList.add("form-select"))});async function z(){c.post(route(i.selectedOption),{onSuccess:()=>{d.success("Data successfully imported!");const t=E.getInstance("#importStaticDataModal");t==null||t.hide()},onError:t=>{d.error(t.zip)}})}return(t,_)=>{var g,v,y;return l(),o("div",ae,[e("div",se,[p(X,{"modal-id":"importStaticDataModal"})]),p(C,{title:t.$t("Imported_shape_files_logs"),"content-full":""},{default:f(()=>{var r;return[((r=a.logs.data)==null?void 0:r.length)==0?(l(),o("div",le,s(t.$t("No_data")),1)):(l(),Y(n(U),{key:1,"ds-data":a.logs.data},{default:f(({ds:Le})=>[e("div",oe,[e("div",ne,[e("div",ie,[e("table",re,[e("thead",null,[e("tr",null,[de,(l(!0),o(h,null,b(m,(u,S)=>(l(),o("th",{key:u.field},s(u.name),1))),128))])]),p(n(P),{tag:"tbody",class:"fs-sm"},{default:f(({row:u,rowIndex:S})=>[e("tr",null,[e("th",ce,s(S+1),1),e("td",null,s(u.type),1),e("td",null,s(u.comment),1),e("td",null,s(n(G).formatDate(u.created_at,"DD-MM-YYYY")),1)])]),_:1})])])])]),e("div",pe,[p(K,{links:a.logs.links},null,8,["links"])])]),_:1},8,["ds-data"]))]}),_:1},8,["title"]),e("div",_e,[e("div",ue,[e("div",me,[e("div",fe,[e("h5",he,s(t.$t("Import_zipped_shapefile_data")),1),be]),e("div",ge,[e("form",{onSubmit:O(z,["prevent"])},[e("div",ye,[e("div",Se,[V(e("select",{class:"form-select","aria-label":"Select layer type","onUpdate:modelValue":_[0]||(_[0]=r=>i.selectedOption=r)},[e("option",$e,s(t.$t("Select_layer_type")),1),(l(!0),o(h,null,b(i.options,r=>(l(),o("option",{value:r.value},s(r.label),9,xe))),256))],512),[[F,i.selectedOption]])]),e("div",Me,[p(H,{type:"file",accept:"zip,application/octet-stream,application/zip,application/x-zip,application/x-zip-compressed",onChange:_[1]||(_[1]=r=>n(c).zip=r.target.files[0]),class:x({"is-invalid":(v=(g=n(c).errors)==null?void 0:g.zip)==null?void 0:v.length}),placeholder:"Select a shapefile"},null,8,["class"]),n(c).progress?(l(),o("progress",{key:0,value:n(c).progress.percentage,max:"100"},s(n(c).progress.percentage)+"% ",9,ke)):T("",!0),e("div",ze,s((y=n(c).errors)==null?void 0:y.zip),1)]),e("div",De,[p(te)])])],40,ve)])])])])])}}},Fe=N(Ie,[["__scopeId","data-v-57c31781"]]);export{Fe as default};
