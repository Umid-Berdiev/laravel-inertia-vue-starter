import{_ as w,k as B,a as z,u as k,r as S,o as R,b as d,c,g as e,t as a,e as r,w as $,j as O,i as _,F as x,h as C,z as T,A as q,B as U,M as W}from"./app.56cb7126.js";import{u as D}from"./useNotyf.9adfdd7d.js";import{_ as E}from"./Input.7aced2d7.js";import{_ as G}from"./Button.22fb6a3c.js";import{_ as J}from"./BaseBlock.22552c46.js";import{_ as V}from"./InputLabel.5b59311f.js";import{C as Q}from"./ConfirmModal.5c5d956d.js";const H=[{name_uz:"Nukus",soato:173501},{name_uz:"Urganch",soato:173301},{name_uz:"Navoiy",soato:171201},{name_uz:"Buhoro",soato:170601},{name_uz:"Samarqand",soato:171801},{name_uz:"Termez",soato:172201},{name_uz:"Jizzah",soato:170801},{name_uz:"Guliston",soato:172401},{name_uz:"Andijon",soato:1703203},{name_uz:"Namangan",soato:1714212},{name_uz:"Farg'ona",soato:1730233},{name_uz:"Toshkent",soato:172701},{name_uz:"Qarshi",soato:171001}];const m=u=>(q("data-v-cbf92a65"),u=u(),U(),u),K={class:"content"},P={class:"d-flex justify-content-end"},X={type:"button",class:"btn btn-alt-primary","data-bs-toggle":"modal","data-bs-target":"#modal-confirm"},Y=m(()=>e("i",{class:"fa fa-download me-1"},null,-1)),Z=m(()=>e("br",null,null,-1)),ee={key:0,class:"text-center"},te={key:1,class:"row"},oe={class:"col-md-12"},ae={class:"table-responsive"},se={class:"table table-striped mb-0"},ne=m(()=>e("th",{scope:"col"},"#",-1)),ie={scope:"row"},le={class:"d-flex gap-2"},de=["onClick"],ce=m(()=>e("i",{class:"si si-eye"},null,-1)),re=[ce],ue=["onClick"],_e=m(()=>e("i",{class:"si si-pencil"},null,-1)),me=[_e],he={class:"modal fade",id:"regionFormModal",tabindex:"-1","aria-labelledby":"regionFormModalLabel","aria-hidden":"true"},fe={class:"modal-dialog modal-dialog-popout"},pe={class:"modal-content"},be={class:"modal-header"},ve={class:"modal-title",id:"regionFormModalLabel"},ge=m(()=>e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),ye={class:"modal-body"},ze=["onSubmit"],ke={class:"row"},Se={class:"col-12 mb-3"},$e={class:"invalid-feedback animated fadeIn"},xe={class:"col-12 mb-3"},Ce={class:"invalid-feedback animated fadeIn"},Ee={class:"col-auto ms-auto"},Ve={__name:"Regions",props:{regions:{type:Array,default:()=>[]}},setup(u){const F=u,v=D(),f=B(()=>W.getOrCreateInstance("#regionFormModal")),M=z([{name:"Viloyat soato kodi",field:"soato"},{name:"Viloyat nomi",field:"name_uz"},{name:"Shahar soato kodi",field:"city_soato"},{name:"Shahar nomi",field:"city_name_uz"}]),p=z({name_uz:"",name_ru:"",admincenter_uz:"",admincenter_ru:""}),o=k(p),b=S(!1),g=S([]);R(()=>{var s;(s=f.value)==null||s._element.addEventListener("hidden.bs.modal",i=>{o.reset(),o.clearErrors(),b.value=!1}),document.querySelectorAll("#datasetLength label").forEach(i=>{i.remove()});let t=document.querySelector("#datasetLength select");t&&(t.classList="",t.classList.add("form-select")),g.value=F.regions.map(i=>{const h=H.find(l=>String(l.soato).startsWith(i.soato));return{...i,city_name_uz:h.name_uz,city_soato:h.soato}})});async function L(){o.put(route("regions.update",p.id),{onSuccess:()=>{var t;v.success("Region successfully updated!"),o.reset(),o.clearErrors(),(t=f.value)==null||t.hide()},onError:t=>{v.error("Error while updating region!")}})}function N(t){var s;b.value=!0,Object.assign(p,t),o.name_uz=t.name_uz,o.name_ru=t.name_ru,o.admincenter_uz=t.admincenter_uz,o.admincenter_ru=t.admincenter_ru,(s=f.value)==null||s.toggle()}function A(t){k().get(route("districts.index",t))}function I(){location.href=route("regions.export")}return(t,s)=>{var i,h;return d(),c("div",K,[e("div",P,[e("button",X,[Y,e("span",null,a(t.$t("Export_to_excel")),1)])]),Z,r(J,{title:t.$t("Regions_table"),"content-full":""},{default:$(()=>{var l;return[((l=u.regions)==null?void 0:l.length)==0?(d(),c("div",ee,a(t.$t("No_data")),1)):(d(),c("div",te,[e("div",oe,[e("div",ae,[e("table",se,[e("thead",null,[e("tr",null,[ne,(d(!0),c(x,null,C(M,(n,y)=>(d(),c("th",{key:n.field},a(n.name),1))),128)),e("th",null,a(t.$t("Actions")),1)])]),e("tbody",null,[(d(!0),c(x,null,C(g.value,(n,y)=>(d(),c("tr",{key:n.id},[e("th",ie,a(y+1),1),e("td",null,a(n.soato),1),e("td",null,a(n.name_uz),1),e("td",null,a(n.city_soato),1),e("td",null,a(n.city_name_uz),1),e("td",le,[e("button",{type:"button",class:"btn btn-secondary w-auto",onClick:j=>A(n.id)},re,8,de),e("button",{type:"button",class:"btn btn-secondary w-auto",onClick:j=>N(n)},me,8,ue)])]))),128))])])])])]))]}),_:1},8,["title"]),e("div",he,[e("div",fe,[e("div",pe,[e("div",be,[e("h5",ve,a(b.value?t.$t("Edit_region_data"):t.$t("Add_region_data")),1),ge]),e("div",ye,[e("form",{onSubmit:O(L,["prevent"])},[e("div",ke,[e("div",Se,[r(V,{value:"Name uz"}),r(E,{type:"text",modelValue:_(o).name_uz,"onUpdate:modelValue":s[0]||(s[0]=l=>_(o).name_uz=l)},null,8,["modelValue"]),e("div",$e,a((i=_(o).errors)==null?void 0:i.name_uz),1)]),e("div",xe,[r(V,{value:"Admincenter uz"}),r(E,{type:"text",modelValue:_(o).admincenter_uz,"onUpdate:modelValue":s[1]||(s[1]=l=>_(o).admincenter_uz=l)},null,8,["modelValue"]),e("div",Ce,a((h=_(o).errors)==null?void 0:h.admincenter_uz),1)]),e("div",Ee,[r(G,null,{default:$(()=>[T(a(t.$t("Submit")),1)]),_:1})])])],40,ze)])])])]),r(Q,{onConfirm:I})])}}},we=w(Ve,[["__scopeId","data-v-cbf92a65"]]);export{we as default};
