import{_ as F,c as V,r as x,u as z,a as I,o as N,b as _,d as m,e as t,w,t as o,f as l,g as p,h as a,i as D,F as j,j as A,k as B,p as O,l as P,M as q}from"./app.35649df7.js";import{u as T}from"./useNotyf.f631be2c.js";import{_ as k}from"./Input.6c8b1c5c.js";import{_ as U}from"./Button.06088e37.js";import{x as R,P as G,b as H,_ as J,y as K,w as Q}from"./vue-dataset.es.111b1943.js";import{_ as W}from"./BaseBlock.afe43d44.js";import{_ as S}from"./InputLabel.2dd648e5.js";import{C as X}from"./ConfirmModal.7ba8cd55.js";const c=r=>(O("data-v-1b5e4dcb"),r=r(),P(),r),Y={class:"content"},Z={class:"d-flex"},tt=c(()=>t("i",{class:"si si-arrow-left me-1"},null,-1)),et={type:"button",class:"btn btn-alt-primary ms-auto","data-bs-toggle":"modal","data-bs-target":"#modal-confirm"},st=c(()=>t("i",{class:"fa fa-download me-1"},null,-1)),ot=c(()=>t("br",null,null,-1)),at={key:0,class:"text-center"},nt=["data-page-count"],lt={id:"datasetLength",class:"col-auto py-2"},dt={class:"col-auto ms-auto py-2"},it=c(()=>t("hr",null,null,-1)),ct={class:"row"},rt={class:"col-md-12"},ut={class:"table-responsive"},_t={class:"table table-striped mb-0"},mt=c(()=>t("th",{scope:"col"},"#",-1)),pt={scope:"row"},ft={class:"d-flex gap-2"},ht=["onClick"],bt=c(()=>t("i",{class:"si si-pencil"},null,-1)),vt=[bt],yt={class:"d-flex flex-md-row flex-column justify-content-between align-items-center"},gt={class:"modal fade",id:"districtFormModal",tabindex:"-1","aria-labelledby":"districtFormModalLabel","aria-hidden":"true"},xt={class:"modal-dialog modal-dialog-popout"},zt={class:"modal-content"},wt={class:"modal-header"},kt={class:"modal-title",id:"districtFormModalLabel"},St=c(()=>t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),$t={class:"modal-body"},Et=["onSubmit"],Lt={class:"row"},Mt={class:"col-12 mb-3"},Ct={class:"invalid-feedback animated fadeIn"},Ft={class:"col-12 mb-3"},Vt={class:"invalid-feedback animated fadeIn"},It={class:"col-auto ms-auto"},Nt={__name:"Districts",props:{districts:{type:Array,default:()=>[]}},setup(r){const v=T(),f=V(()=>q.getOrCreateInstance("#districtFormModal")),$=x([{name:"Soato",field:"soato"},{name:"Region soato",field:"region_soato"},{name:"Name uz",field:"name_uz"}]),h=x({name_uz:"",name_ru:"",admincenter_uz:"",admincenter_ru:""}),s=z(h),b=I(!1);N(()=>{var n;(n=f.value)==null||n._element.addEventListener("hidden.bs.modal",u=>{s.reset(),s.clearErrors(),b.value=!1}),document.querySelectorAll("#datasetLength label").forEach(u=>{u.remove()});let e=document.querySelector("#datasetLength select");e&&(e.classList="",e.classList.add("form-select"))});async function E(){s.put(route("districts.update",h.id),{onSuccess:()=>{var e;v.success("District successfully updated!"),s.reset(),s.clearErrors(),(e=f.value)==null||e.hide()},onError:e=>{v.error("Error while updating district!")}})}function L(e){var n;b.value=!0,Object.assign(h,e),s.name_uz=e.name_uz,s.name_ru=e.name_ru,s.admincenter_uz=e.admincenter_uz,s.admincenter_ru=e.admincenter_ru,(n=f.value)==null||n.toggle()}function M(){location.href=route("districts.export",route().params.region)}return(e,n)=>{var u,y;return _(),m("div",Y,[t("div",Z,[t("button",{type:"button",class:"btn btn-alt-primary",onClick:n[0]||(n[0]=w(d=>a(z)().get(e.route("regions.index")),["prevent"]))},[tt,t("span",null,o(e.$t("Back")),1)]),t("button",et,[st,t("span",null,o(e.$t("Export_to_excel")),1)])]),ot,l(W,{title:e.$t("Districts_table"),"content-full":""},{default:p(()=>{var d;return[((d=r.districts)==null?void 0:d.length)==0?(_(),m("div",at,o(e.$t("No_data")),1)):(_(),D(a(Q),{key:1,"ds-data":r.districts},{default:p(C=>[t("div",{class:"row","data-page-count":C.dsPagecount},[t("div",lt,[l(a(R))]),t("div",dt,[l(a(G),{"ds-search-placeholder":e.$t("Search")+"..."},null,8,["ds-search-placeholder"])])],8,nt),it,t("div",ct,[t("div",rt,[t("div",ut,[t("table",_t,[t("thead",null,[t("tr",null,[mt,(_(!0),m(j,null,A($,(i,g)=>(_(),m("th",{key:i.field},o(i.name),1))),128)),t("th",null,o(e.$t("Actions")),1)])]),l(a(H),{tag:"tbody",class:"fs-sm"},{default:p(({row:i,rowIndex:g})=>[t("tr",null,[t("th",pt,o(g+1),1),t("td",null,o(i.soato),1),t("td",null,o(i.region_soato),1),t("td",null,o(i.name_uz),1),t("td",ft,[t("button",{type:"button",class:"btn btn-secondary w-auto",onClick:Dt=>L(i)},vt,8,ht)])])]),_:1})])])])]),t("div",yt,[l(a(J),{class:"py-3 fs-sm"}),l(a(K),{class:"flex-wrap py-3 fs-sm"})])]),_:1},8,["ds-data"]))]}),_:1},8,["title"]),t("div",gt,[t("div",xt,[t("div",zt,[t("div",wt,[t("h5",kt,o(b.value?"Edit district data":"Add district data"),1),St]),t("div",$t,[t("form",{onSubmit:w(E,["prevent"])},[t("div",Lt,[t("div",Mt,[l(S,{value:"Name uz"}),l(k,{type:"text",modelValue:a(s).name_uz,"onUpdate:modelValue":n[1]||(n[1]=d=>a(s).name_uz=d)},null,8,["modelValue"]),t("div",Ct,o((u=a(s).errors)==null?void 0:u.name_uz),1)]),t("div",Ft,[l(S,{value:"Admincenter uz"}),l(k,{type:"text",modelValue:a(s).admincenter_uz,"onUpdate:modelValue":n[2]||(n[2]=d=>a(s).admincenter_uz=d)},null,8,["modelValue"]),t("div",Vt,o((y=a(s).errors)==null?void 0:y.admincenter_uz),1)]),t("div",It,[l(U,null,{default:p(()=>[B(o(e.$t("Submit")),1)]),_:1})])])],40,Et)])])])]),l(X,{onConfirm:M})])}}},Rt=F(Nt,[["__scopeId","data-v-1b5e4dcb"]]);export{Rt as default};
