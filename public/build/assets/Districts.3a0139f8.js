import{_ as F,k as V,a as z,u as x,r as I,o as N,b as _,c as m,g as t,j as w,t as a,e as l,w as f,i as o,f as A,F as B,h as D,z as j,A as O,B as P,M as q}from"./app.56cb7126.js";import{u as T}from"./useNotyf.9adfdd7d.js";import{_ as k}from"./Input.7aced2d7.js";import{_ as U}from"./Button.22fb6a3c.js";import{x as R,P as G,b as H,_ as J,y as K,w as Q}from"./vue-dataset.es.b193e4bb.js";import{_ as W}from"./BaseBlock.22552c46.js";import{_ as S}from"./InputLabel.5b59311f.js";import{C as X}from"./ConfirmModal.5c5d956d.js";const c=r=>(O("data-v-3417a480"),r=r(),P(),r),Y={class:"content"},Z={class:"d-flex"},tt=c(()=>t("i",{class:"si si-arrow-left me-1"},null,-1)),et={type:"button",class:"btn btn-alt-primary ms-auto","data-bs-toggle":"modal","data-bs-target":"#modal-confirm"},st=c(()=>t("i",{class:"fa fa-download me-1"},null,-1)),at=c(()=>t("br",null,null,-1)),ot={key:0,class:"text-center"},nt=["data-page-count"],lt={id:"datasetLength",class:"col-auto py-2"},dt={class:"col-auto ms-auto py-2"},it=c(()=>t("hr",null,null,-1)),ct={class:"row"},rt={class:"col-md-12"},ut={class:"table-responsive"},_t={class:"table table-striped mb-0"},mt=c(()=>t("th",{scope:"col"},"#",-1)),ft={scope:"row"},pt={class:"d-flex gap-2"},ht=["onClick"],bt=c(()=>t("i",{class:"si si-pencil"},null,-1)),vt=[bt],yt={class:"d-flex flex-md-row flex-column justify-content-between align-items-center"},gt={class:"modal fade",id:"districtFormModal",tabindex:"-1","aria-labelledby":"districtFormModalLabel","aria-hidden":"true"},zt={class:"modal-dialog modal-dialog-popout"},xt={class:"modal-content"},wt={class:"modal-header"},kt={class:"modal-title",id:"districtFormModalLabel"},St=c(()=>t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),$t={class:"modal-body"},Et=["onSubmit"],Lt={class:"row"},Mt={class:"col-12 mb-3"},Ct={class:"invalid-feedback animated fadeIn"},Ft={class:"col-12 mb-3"},Vt={class:"invalid-feedback animated fadeIn"},It={class:"col-auto ms-auto"},Nt={__name:"Districts",props:{districts:{type:Array,default:()=>[]}},setup(r){const v=T(),p=V(()=>q.getOrCreateInstance("#districtFormModal")),$=z([{name:"Soato",field:"soato"},{name:"Region soato",field:"region_soato"},{name:"Name uz",field:"name_uz"}]),h=z({name_uz:"",name_ru:"",admincenter_uz:"",admincenter_ru:""}),s=x(h),b=I(!1);N(()=>{var n;(n=p.value)==null||n._element.addEventListener("hidden.bs.modal",u=>{s.reset(),s.clearErrors(),b.value=!1}),document.querySelectorAll("#datasetLength label").forEach(u=>{u.remove()});let e=document.querySelector("#datasetLength select");e&&(e.classList="",e.classList.add("form-select"))});async function E(){s.put(route("districts.update",h.id),{onSuccess:()=>{var e;v.success("District successfully updated!"),s.reset(),s.clearErrors(),(e=p.value)==null||e.hide()},onError:e=>{v.error("Error while updating district!")}})}function L(e){var n;b.value=!0,Object.assign(h,e),s.name_uz=e.name_uz,s.name_ru=e.name_ru,s.admincenter_uz=e.admincenter_uz,s.admincenter_ru=e.admincenter_ru,(n=p.value)==null||n.toggle()}function M(){location.href=route("districts.export",route().params.region)}return(e,n)=>{var u,y;return _(),m("div",Y,[t("div",Z,[t("button",{type:"button",class:"btn btn-alt-primary",onClick:n[0]||(n[0]=w(d=>o(x)().get(e.route("regions.index")),["prevent"]))},[tt,t("span",null,a(e.$t("Back")),1)]),t("button",et,[st,t("span",null,a(e.$t("Export_to_excel")),1)])]),at,l(W,{title:e.$t("Districts_table"),"content-full":""},{default:f(()=>{var d;return[((d=r.districts)==null?void 0:d.length)==0?(_(),m("div",ot,a(e.$t("No_data")),1)):(_(),A(o(Q),{key:1,"ds-data":r.districts},{default:f(C=>[t("div",{class:"row","data-page-count":C.dsPagecount},[t("div",lt,[l(o(R))]),t("div",dt,[l(o(G),{"ds-search-placeholder":e.$t("Search")+"..."},null,8,["ds-search-placeholder"])])],8,nt),it,t("div",ct,[t("div",rt,[t("div",ut,[t("table",_t,[t("thead",null,[t("tr",null,[mt,(_(!0),m(B,null,D($,(i,g)=>(_(),m("th",{key:i.field},a(i.name),1))),128)),t("th",null,a(e.$t("Actions")),1)])]),l(o(H),{tag:"tbody",class:"fs-sm"},{default:f(({row:i,rowIndex:g})=>[t("tr",null,[t("th",ft,a(g+1),1),t("td",null,a(i.soato),1),t("td",null,a(i.region_soato),1),t("td",null,a(i.name_uz),1),t("td",pt,[t("button",{type:"button",class:"btn btn-secondary w-auto",onClick:At=>L(i)},vt,8,ht)])])]),_:1})])])])]),t("div",yt,[l(o(J),{class:"py-3 fs-sm"}),l(o(K),{class:"flex-wrap py-3 fs-sm"})])]),_:1},8,["ds-data"]))]}),_:1},8,["title"]),t("div",gt,[t("div",zt,[t("div",xt,[t("div",wt,[t("h5",kt,a(b.value?"Edit district data":"Add district data"),1),St]),t("div",$t,[t("form",{onSubmit:w(E,["prevent"])},[t("div",Lt,[t("div",Mt,[l(S,{value:"Name uz"}),l(k,{type:"text",modelValue:o(s).name_uz,"onUpdate:modelValue":n[1]||(n[1]=d=>o(s).name_uz=d)},null,8,["modelValue"]),t("div",Ct,a((u=o(s).errors)==null?void 0:u.name_uz),1)]),t("div",Ft,[l(S,{value:"Admincenter uz"}),l(k,{type:"text",modelValue:o(s).admincenter_uz,"onUpdate:modelValue":n[2]||(n[2]=d=>o(s).admincenter_uz=d)},null,8,["modelValue"]),t("div",Vt,a((y=o(s).errors)==null?void 0:y.admincenter_uz),1)]),t("div",It,[l(U,null,{default:f(()=>[j(a(e.$t("Submit")),1)]),_:1})])])],40,Et)])])])]),l(X,{onConfirm:M})])}}},Rt=F(Nt,[["__scopeId","data-v-3417a480"]]);export{Rt as default};
