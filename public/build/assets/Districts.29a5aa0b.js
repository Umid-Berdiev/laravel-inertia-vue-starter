import{_ as F,c as V,r as x,u as z,a as I,o as N,b as _,d as m,e as t,w,t as a,f as l,g as p,h as D,i as o,j,F as A,k as B,l as O,p as P,m as q,M as T}from"./app.8f1a4e68.js";import{u as U}from"./useNotyf.d9892d78.js";import{_ as k}from"./Input.76c5081f.js";import{_ as R}from"./Button.ac1f6753.js";import{x as G,P as H,b as J,_ as K,y as Q,w as W}from"./vue-dataset.es.ecd052ac.js";import{_ as S}from"./InputLabel.1c57481a.js";import{C as X}from"./ConfirmModal.754a5599.js";const c=r=>(P("data-v-1b5e4dcb"),r=r(),q(),r),Y={class:"content"},Z={class:"d-flex"},tt=c(()=>t("i",{class:"si si-arrow-left me-1"},null,-1)),et={type:"button",class:"btn btn-alt-primary ms-auto","data-bs-toggle":"modal","data-bs-target":"#modal-confirm"},st=c(()=>t("i",{class:"fa fa-download me-1"},null,-1)),at=c(()=>t("br",null,null,-1)),ot={key:0,class:"text-center"},nt=["data-page-count"],lt={id:"datasetLength",class:"col-auto py-2"},dt={class:"col-auto ms-auto py-2"},it=c(()=>t("hr",null,null,-1)),ct={class:"row"},rt={class:"col-md-12"},ut={class:"table-responsive"},_t={class:"table table-striped mb-0"},mt=c(()=>t("th",{scope:"col"},"#",-1)),pt={scope:"row"},ft={class:"d-flex gap-2"},ht=["onClick"],bt=c(()=>t("i",{class:"si si-pencil"},null,-1)),vt=[bt],yt={class:"d-flex flex-md-row flex-column justify-content-between align-items-center"},gt={class:"modal fade",id:"districtFormModal",tabindex:"-1","aria-labelledby":"districtFormModalLabel","aria-hidden":"true"},xt={class:"modal-dialog modal-dialog-popout"},zt={class:"modal-content"},wt={class:"modal-header"},kt={class:"modal-title",id:"districtFormModalLabel"},St=c(()=>t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),$t={class:"modal-body"},Et=["onSubmit"],Lt={class:"row"},Mt={class:"col-12 mb-3"},Ct={class:"invalid-feedback animated fadeIn"},Ft={class:"col-12 mb-3"},Vt={class:"invalid-feedback animated fadeIn"},It={class:"col-auto ms-auto"},Nt={__name:"Districts",props:{districts:{type:Array,default:()=>[]}},setup(r){const v=U(),f=V(()=>T.getOrCreateInstance("#districtFormModal")),$=x([{name:"Soato",field:"soato"},{name:"Region soato",field:"region_soato"},{name:"Name uz",field:"name_uz"}]),h=x({name_uz:"",name_ru:"",admincenter_uz:"",admincenter_ru:""}),s=z(h),b=I(!1);N(()=>{var n;(n=f.value)==null||n._element.addEventListener("hidden.bs.modal",u=>{s.reset(),s.clearErrors(),b.value=!1}),document.querySelectorAll("#datasetLength label").forEach(u=>{u.remove()});let e=document.querySelector("#datasetLength select");e&&(e.classList="",e.classList.add("form-select"))});async function E(){s.put(route("districts.update",h.id),{onSuccess:()=>{var e;v.success("District successfully updated!"),s.reset(),s.clearErrors(),(e=f.value)==null||e.hide()},onError:e=>{v.error("Error while updating district!")}})}function L(e){var n;b.value=!0,Object.assign(h,e),s.name_uz=e.name_uz,s.name_ru=e.name_ru,s.admincenter_uz=e.admincenter_uz,s.admincenter_ru=e.admincenter_ru,(n=f.value)==null||n.toggle()}function M(){location.href=route("districts.export",route().params.region)}return(e,n)=>{var u,y;return _(),m("div",Y,[t("div",Z,[t("button",{type:"button",class:"btn btn-alt-primary",onClick:n[0]||(n[0]=w(d=>o(z)().get(e.route("regions.index")),["prevent"]))},[tt,t("span",null,a(e.$t("Back")),1)]),t("button",et,[st,t("span",null,a(e.$t("Export_to_excel")),1)])]),at,l(D,{title:e.$t("Districts_table"),"content-full":""},{default:p(()=>{var d;return[((d=r.districts)==null?void 0:d.length)==0?(_(),m("div",ot,a(e.$t("No_data")),1)):(_(),j(o(W),{key:1,"ds-data":r.districts},{default:p(C=>[t("div",{class:"row","data-page-count":C.dsPagecount},[t("div",lt,[l(o(G))]),t("div",dt,[l(o(H),{"ds-search-placeholder":e.$t("Search")+"..."},null,8,["ds-search-placeholder"])])],8,nt),it,t("div",ct,[t("div",rt,[t("div",ut,[t("table",_t,[t("thead",null,[t("tr",null,[mt,(_(!0),m(A,null,B($,(i,g)=>(_(),m("th",{key:i.field},a(i.name),1))),128)),t("th",null,a(e.$t("Actions")),1)])]),l(o(J),{tag:"tbody",class:"fs-sm"},{default:p(({row:i,rowIndex:g})=>[t("tr",null,[t("th",pt,a(g+1),1),t("td",null,a(i.soato),1),t("td",null,a(i.region_soato),1),t("td",null,a(i.name_uz),1),t("td",ft,[t("button",{type:"button",class:"btn btn-secondary w-auto",onClick:Dt=>L(i)},vt,8,ht)])])]),_:1})])])])]),t("div",yt,[l(o(K),{class:"py-3 fs-sm"}),l(o(Q),{class:"flex-wrap py-3 fs-sm"})])]),_:1},8,["ds-data"]))]}),_:1},8,["title"]),t("div",gt,[t("div",xt,[t("div",zt,[t("div",wt,[t("h5",kt,a(b.value?"Edit district data":"Add district data"),1),St]),t("div",$t,[t("form",{onSubmit:w(E,["prevent"])},[t("div",Lt,[t("div",Mt,[l(S,{value:"Name uz"}),l(k,{type:"text",modelValue:o(s).name_uz,"onUpdate:modelValue":n[1]||(n[1]=d=>o(s).name_uz=d)},null,8,["modelValue"]),t("div",Ct,a((u=o(s).errors)==null?void 0:u.name_uz),1)]),t("div",Ft,[l(S,{value:"Admincenter uz"}),l(k,{type:"text",modelValue:o(s).admincenter_uz,"onUpdate:modelValue":n[2]||(n[2]=d=>o(s).admincenter_uz=d)},null,8,["modelValue"]),t("div",Vt,a((y=o(s).errors)==null?void 0:y.admincenter_uz),1)]),t("div",It,[l(R,null,{default:p(()=>[O(a(e.$t("Submit")),1)]),_:1})])])],40,Et)])])])]),l(X,{onConfirm:M})])}}},Ut=F(Nt,[["__scopeId","data-v-1b5e4dcb"]]);export{Ut as default};
