import{b as s,d as o,e,F as h,k as b,q as M,f as c,g as m,i,V as D,N as z,t as a,_ as I,r as $,u as N,o as w,h as L,w as B,H as C,W as O,z as V,j as F,p as Y,m as j,M as q}from"./app.bfed04c4.js";import{u as H}from"./useNotyf.82894d97.js";import{_ as T}from"./Input.b7ba5528.js";import{h as A}from"./helper.5068cdf4.js";import{b as E,w as P}from"./vue-dataset.es.710e8406.js";import{_ as U}from"./SubmitButton.vue_vue_type_script_setup_true_lang.108149b6.js";import"./moment.62d3fb0a.js";const W={"aria-label":"..."},Z={class:"pagination"},G=["innerHTML"],J={__name:"Pagination",props:{current_page:{type:Number,default:1},first_page_url:"",from:{type:Number,default:1},last_page:{type:Number,default:1},last_page_url:"",links:{type:Array,default:()=>[]},next_page_url:null,path:"",per_page:{type:Number,default:10},prev_page_url:null,to:{type:Number,default:2},total:{type:Number,default:10}},setup(l){return(u,f)=>(s(),o("div",null,[e("nav",W,[e("ul",Z,[(s(!0),o(h,null,b(l.links,n=>(s(),o("li",{class:M(["page-item",{disabled:!n.url,active:n.active}])},[c(i(D),{href:n.url,class:"page-link"},{default:m(()=>[e("span",{innerHTML:n.label},null,8,G)]),_:2},1032,["href"])],2))),256))])])]))}},K=["data-bs-target"],Q=e("i",{class:"fa fa-fw fa-download me-1"},null,-1),R=z({__name:"ImportButton",props:{modalId:String},setup(l){return(u,f)=>(s(),o("button",{type:"button",class:"btn btn-alt-primary push","data-bs-toggle":"modal","data-bs-target":`#${l.modalId}`},[Q,e("span",null,a(u.$t("Import_shapefile")),1)],8,K))}});const k=l=>(Y("data-v-b39122eb"),l=l(),j(),l),X={class:"content"},ee={class:"d-flex justify-content-end"},te={key:0,class:"text-center"},ae={class:"row"},se={class:"col-md-12"},le={class:"table-responsive"},oe={class:"table table-striped mb-0"},ie=k(()=>e("th",{scope:"col"},"#",-1)),ne={scope:"row"},de={class:"d-flex flex-md-row flex-column align-items-center mt-3"},re={class:"modal fade",id:"importStaticDataModal",tabindex:"-1","aria-labelledby":"importStaticDataModalLabel","aria-hidden":"true"},ce={class:"modal-dialog"},pe={class:"modal-content"},_e={class:"modal-header"},ue={class:"modal-title",id:"importStaticDataModalLabel"},me=k(()=>e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),fe={class:"modal-body"},he=["onSubmit"],be={class:"row"},ge={class:"col-12 mb-4"},ve={selected:"",disabled:"",value:null},ye=["value"],Se={class:"col-12 mb-4"},$e=["value"],Me={class:"invalid-feedback animated fadeIn"},ke={class:"col-auto ms-auto"},xe={__name:"Statics",props:{logs:{type:Object,default:()=>({current_page:1,data:[],first_page_url:"",from:1,last_page:1,last_page_url:"",links:[],next_page_url:null,path:"",per_page:10,prev_page_url:null,to:2,total:10})}},setup(l){const u=H(),f=$([{name:"Data type",field:"type"},{name:"Comment",field:"comment"},{name:"Date",field:"created_at"}]),n=$({options:[{label:"Zones",value:"zones.import.shape_file"},{label:"Balls",value:"balls.import.shape_file"},{label:"Borders",value:"borders.import.shape_file"}],selectedOption:"balls.import.shape_file"}),r=N({zip:null});w(()=>{document.querySelectorAll("#datasetLength label").forEach(p=>{p.remove()});let t=document.querySelector("#datasetLength select");t&&(t.classList="",t.classList.add("form-select"))});async function x(){r.post(route(n.selectedOption),{onSuccess:()=>{u.success("Data successfully imported!");const t=q.getInstance("#importStaticDataModal");r.reset(),t==null||t.hide()}})}return(t,p)=>{var g,v,y;return s(),o("div",X,[e("div",ee,[c(R,{"modal-id":"importStaticDataModal"})]),c(L,{title:t.$t("Imported_shape_files_logs"),"content-full":""},{default:m(()=>{var d;return[((d=l.logs.data)==null?void 0:d.length)==0?(s(),o("div",te,a(t.$t("No_data")),1)):(s(),F(i(P),{key:1,"ds-data":l.logs.data},{default:m(({ds:De})=>[e("div",ae,[e("div",se,[e("div",le,[e("table",oe,[e("thead",null,[e("tr",null,[ie,(s(!0),o(h,null,b(f,(_,S)=>(s(),o("th",{key:_.field},a(_.name),1))),128))])]),c(i(E),{tag:"tbody",class:"fs-sm"},{default:m(({row:_,rowIndex:S})=>[e("tr",null,[e("th",ne,a(S+1),1),e("td",null,a(_.type),1),e("td",null,a(_.comment),1),e("td",null,a(i(A).formatDate(_.created_at,"DD-MM-YYYY")),1)])]),_:1})])])])]),e("div",de,[c(J,{links:l.logs.links},null,8,["links"])])]),_:1},8,["ds-data"]))]}),_:1},8,["title"]),e("div",re,[e("div",ce,[e("div",pe,[e("div",_e,[e("h5",ue,a(t.$t("Import_zipped_shapefile_data")),1),me]),e("div",fe,[e("form",{onSubmit:B(x,["prevent"])},[e("div",be,[e("div",ge,[C(e("select",{class:"form-select","aria-label":"Select layer type","onUpdate:modelValue":p[0]||(p[0]=d=>n.selectedOption=d)},[e("option",ve,a(t.$t("Select_layer_type")),1),(s(!0),o(h,null,b(n.options,d=>(s(),o("option",{value:d.value},a(d.label),9,ye))),256))],512),[[O,n.selectedOption]])]),e("div",Se,[c(T,{type:"file",accept:"zip,application/octet-stream,application/zip,application/x-zip,application/x-zip-compressed",onChange:p[1]||(p[1]=d=>i(r).zip=d.target.files[0]),class:M({"is-invalid":(v=(g=i(r).errors)==null?void 0:g.zip)==null?void 0:v.length}),placeholder:"Select a shapefile"},null,8,["class"]),i(r).progress?(s(),o("progress",{key:0,value:i(r).progress.percentage,max:"100"},a(i(r).progress.percentage)+"% ",9,$e)):V("",!0),e("div",Me,a((y=i(r).errors)==null?void 0:y.zip),1)]),e("div",ke,[c(U)])])],40,he)])])])])])}}},Oe=I(xe,[["__scopeId","data-v-b39122eb"]]);export{Oe as default};
